# Specification

## Handshake Message

Only sent by the client to the server, the server does not generate any response. If the handshake packet is valid, it will map the TUN IP to the WebSocket, and when other devices access the client, they will receive the IP packet.

- The packet should contain a Type field to distinguish the packet type, occupying 1 byte (8 bits)
- The packet should contain a TUN IP field. Used to establish a mapping between the destination address and WebSocket, occupying 4 bytes (32 bits)
- The packet should contain a TimeStamp field to check the handshake time and avoid replay attacks. Occupying 8 bytes (64 bits)
- The packet should contain a Hash field for authentication. Occupying 32 bytes (256 bits). The Hash value is generated by TimeStamp and the password configured by the server
- The packet can contain an obfuscation field, occupying random bytes and randomly filling bytes. Used to hide the fixed length feature of the handshake packet.

## IP Packet Forwarding Message

Sent by the client and server to each other, the client forwards data read from TUN to Server, and forwards data received from Server to TUN. After receiving the packet, Server analyzes the source address IP, verifies whether IP and Websocket have established a mapping, obtains the destination address IP, and forwards the packet to the corresponding WebSocket.

- The packet should contain a Type field to distinguish the packet type, occupying 1 byte (8 bits)
- The packet should contain IP layer raw data
